(namespace dev)
(import-namespace markup)

(macro html (...body) `(markup (.html ...@body)))

(include "./header"
         "./compile")

(define src Interface
  (client (.load File-system "./src/client"))
  (server (.load File-system "./src/server"))
  (templates (.load File-system "./src/templates")))

(define js Interface

  (client (.load File-system "./client"))
  (server (.load File-system "./server"))
  (templates (.load File-system "./templates")))

(define html Interface
  (files (.load File-system "./html")))

(macro html (...body) `(markup (.html ...@body)))

(watch src.server "." "change" (compile-module file js.server))

(watch src.client "." "change" (compile-module file js.client))

(watch src.templates "." "change" (compile-module file js.templates))

(watch js.templates "." "change" (compile-html file html.files))

(require! (lit server) "./server")
