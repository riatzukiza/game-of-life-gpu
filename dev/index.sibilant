(namespace dev)

(macro html (...body) `(markup (.html ...@body)))

(include "./header"
         "./compile")

(import-namespace kit)
(import-namespace interface)
(import-namespace async)
(import-namespace markup)

(define src Interface
  (client (.load File-system "./src/client"))
  (server (.load File-system "./src/server"))
  (templates (.load File-system "./src/templates")))

(define js Interface

  (client (.load File-system "./client"))
  (server (.load File-system "./server"))
  (templates (.load File-system "./templates"))
  (bundles (.load File-system "./bundles")))

(define html Interface
  (files (.load File-system "./html")))

(macro html (...body) `(markup (.html ...@body)))

(watch src.server "." "change" (compile-module file js.server))

(watch src.client "." "change" (compile-module file js.client))

(watch src.templates "." "change" (compile-module file js.templates))

(watch js.templates "." "change" (compile-html file html.files))

(watch js.client "." "change" (bundle file js.bundles))

